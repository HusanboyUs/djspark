{% load static %}
<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Upload JavaScript with Progress Ba | CodingNepal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
   integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</head>
<body>
      

   <div class="col-md-6 offset-md-3 mt-5">
       <img style="width: 30vh;" src='https://cdn.icon-icons.com/icons2/2699/PNG/512/apache_spark_logo_icon_170561.png'>
     <br>
     <h1>DataFrame cleaner with Django/Psyspark</h1>
     <br>

     <form accept-charset="UTF-8" action="" method="POST">
        {% csrf_token %}
       
       <div class="form-group">
         <label for="exampleFormControlSelect1">Mode</label>
         <select class="form-control" id="exampleFormControlSelect1" name="platform" >
           <option>All</option>
           <option>Any</option>
         </select>
       </div>

       <div class="form-group">
            <label for="exampleInputEmail1">Special Columns to consider:</label>
            <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="By default:None, enter column like: userID">
        </div>

       <hr>
       <div class="form-group mt-3">
         <label class="mr-2">Upload your DataFrame:</label>
         <input type="file" name="file" id="file-input">
       </div>
       <hr>
       <button type="button" class="btn btn-primary" onclick="uploadFile()">Submit</button>
       
     </form>

 </div> 
 <p>dataframe here: </p>
 {{ dataframe | safe }}
 
</body>

























<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!--
<script>
    
    function uploadFile() {
    var fileInput = document.getElementById('file-input');
    var file = fileInput.files[0];
    var formData = new FormData();
    formData.append('file', file);
    formData.append('file', file);
    formData.append('file_name', file.name);
    formData.append('file_location', fileInput.value);
    var csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    $.ajax({
      url: "{% url 'mainPage' %}",
      type: 'POST',
      data: formData,
      processData: false,
      contentType: false,
      headers: {
      'X-CSRFToken': csrfToken
    },
      success: function(response) {
        // Handle the success response
        console.log(response);
      },
      error: function(error) {
        // Handle the error response
        console.log(error);
      }
    });
  }
</script>
-->
</html>